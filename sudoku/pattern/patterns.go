package pattern

import (
	"sort"
	"sync"
)

var (
	patternsNames     []string
	patternsNamesOnce sync.Once

	patternsMap = map[string]*Pattern{
		"diamond": {
			{0, 0, 0, 0, 1, 0, 0, 0, 0},
			{0, 0, 0, 1, 1, 1, 0, 0, 0},
			{0, 0, 1, 1, 0, 1, 1, 0, 0},
			{0, 1, 1, 0, 0, 0, 1, 1, 0},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{0, 1, 1, 0, 0, 0, 1, 1, 0},
			{0, 0, 1, 1, 0, 1, 1, 0, 0},
			{0, 0, 0, 1, 1, 1, 0, 0, 0},
			{0, 0, 0, 0, 1, 0, 0, 0, 0},
		},
		"octagon": {
			{0, 0, 0, 1, 1, 1, 0, 0, 0},
			{0, 0, 1, 1, 1, 1, 1, 0, 0},
			{0, 1, 0, 0, 0, 0, 0, 1, 0},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{0, 1, 0, 0, 0, 0, 0, 1, 0},
			{0, 0, 1, 1, 1, 1, 1, 0, 0},
			{0, 0, 0, 1, 1, 1, 0, 0, 0},
		},
		"square": {
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{1, 1, 0, 0, 0, 0, 0, 1, 1},
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
		},
		"star": {
			{1, 0, 0, 0, 1, 0, 0, 0, 1},
			{0, 1, 0, 0, 1, 0, 0, 1, 0},
			{0, 0, 1, 0, 1, 0, 1, 0, 0},
			{0, 0, 0, 1, 1, 1, 0, 0, 0},
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
			{0, 0, 0, 1, 1, 1, 0, 0, 0},
			{0, 0, 1, 0, 1, 0, 1, 0, 0},
			{0, 1, 0, 0, 1, 0, 0, 1, 0},
			{1, 0, 0, 0, 1, 0, 0, 0, 1},
		},
		"target": {
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 0, 1, 1, 1, 1, 1, 0, 1},
			{1, 0, 1, 0, 0, 0, 1, 0, 1},
			{1, 0, 1, 0, 1, 0, 1, 0, 1},
			{1, 0, 1, 0, 0, 0, 1, 0, 1},
			{1, 0, 1, 1, 1, 1, 1, 0, 1},
			{1, 0, 0, 0, 0, 0, 0, 0, 1},
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
		},
		"triangle": {
			{0, 0, 0, 0, 0, 0, 0, 0, 1},
			{0, 0, 0, 0, 0, 0, 0, 1, 1},
			{0, 0, 0, 0, 0, 0, 1, 1, 1},
			{0, 0, 0, 0, 0, 1, 1, 1, 1},
			{0, 0, 0, 0, 1, 1, 1, 1, 1},
			{0, 0, 0, 1, 1, 1, 1, 1, 1},
			{0, 0, 1, 1, 1, 1, 1, 1, 1},
			{0, 1, 1, 1, 1, 1, 1, 1, 1},
			{1, 1, 1, 1, 1, 1, 1, 1, 1},
		},
	}
)

// Get returns the Pattern matching the given name.
func Get(name string) *Pattern {
	return patternsMap[name]
}

// Names returns the names of all available patterns.
func Names() []string {
	patternsNamesOnce.Do(func() {
		var names []string
		for name := range patternsMap {
			names = append(names, name)
		}
		sort.Strings(names)
		patternsNames = names
	})
	return patternsNames
}
